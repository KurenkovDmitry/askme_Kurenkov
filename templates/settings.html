{% extends 'layouts/base.html' %}

{% load static %}

<title>Настройки</title>

{% block content %}
    <form class="h-100" method="POST" action="" enctype="multipart/form-data">
        {% csrf_token %}
        <!-- Строка ошибки -->
        {% if form.errors %}
            {% for error in form.non_field_errors %}
                <!-- Отдельное поле для каждой ошибки -->
                <div class="alert alert-danger alert-dismissible fade show mt-4" role="alert">
                    {{ error }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endfor %}
        {% endif %}

        <div class="row">
            <h1 class="mb-4">Настройки: {{ user.profiles.name.value }}</h1> <!-- Заголовок "Настройки" -->
        </div>
        <div class="row align-items-lg-center mt-4">
            <div class="col-md-2"><label for="login1" class="form-label">Логин</label></div>
            <div class="col-md-8"><input type="text" class="form-control" id="login1" placeholder="Введите логин" name="username" value="{{ form.username.value }}"></div>
        </div>
        <div class="row align-items-lg-center mt-4">
            <div class="col-md-2"><label for="email1" class="form-label">Почта</label></div>
            <div class="col-md-8">
                <input type="email" class="form-control" id="email1" placeholder="Введите почту" name="email" value="{{ form.email.value }}">
            </div>
        </div>
        <div class="row align-items-lg-center mt-4">
            <div class="col-md-2"><label for="text1" class="form-label">Никнейм</label></div>
            <div class="col-md-8"><input type="text" class="form-control" id="text1" name="name" placeholder="Введите никнейм" value="{{ form.name.value }}"></div>
        </div>
        <div class="row mt-4">
            <div class="col-md-2"><label for="avatar1" class="form-label">Изменить аватар</label></div>
            <div class="col-md-8">
                <div class="d-flex flex-column mb-3">
                    {% if profileava %}
                        <img alt="Avatar" class="img-fluid maxiimg" src="{{ form.avatar.value.url }}">
                    {% else %}
                        <img alt="Avatar" class="img-fluid maxiimg" src="{% static "/img/profile.png" %}">
                    {% endif %}

                    <div class="input-group mt-3">
                        <input type="file" class="form-control" id="avatar1" accept="image/*" name="avatar">
                        <button class="btn btn-outline-secondary" type="button">Выбрать</button>
                    </div>
                </div>
            </div>

            <button type="submit" class="btn btn-primary mt-3">Сохранить изменения</button>
        </div>
    </form>
{% endblock %}